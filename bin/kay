#!/usr/bin/env ruby

require 'kay'
require 'colorize'

command = ARGV[0]

include Kay

begin
  if command == 'create'
    options = CreateParse.parse(ARGV)
    Create.new(options.name).run
  elsif command == 'register'
    options = RegisterParse.parse(ARGV)
    Register.new(options.host).run
  elsif command == 'key-add'
    options = KeyAddParse.parse(ARGV)
    KeyAdd.new(options.file, options.name).run
  end
rescue SystemExit => e
  exit
rescue Exception => e
  abort(e.message.red)
end
